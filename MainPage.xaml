<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Assignment_12._3._2.MainPage"
             xmlns:viewmodel="clr-namespace:Assignment_12._3._2.ViewModels"
             x:DataType="viewmodel:BookViewModel">

    <Grid ColumnDefinitions="20*,40*,40*" Margin="5" ColumnSpacing="5">
        
        <ContentView Grid.Column="0">
            <VerticalStackLayout>
                <Label Text="Book Tracker" FontSize="32"/>
                <Entry Placeholder="Title" Text="{Binding Title}"/>
                <Entry Placeholder="Author" Text="{Binding Author}"/>
                <Button Text="Find"
                        Background="SlateGray"
                        Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodel:BookViewModel}},Path=QueryBookCommand}"
                        />
            </VerticalStackLayout>
        </ContentView>
        
        <ScrollView Grid.Column="1">
            <CollectionView ItemsSource="{Binding QueriedBooks}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Border Padding="5">
                            <VerticalStackLayout>
                                <Label Text="{Binding .}" FontSize="24" />
                                <Button Text="Save"
                                    Background="Blue"
                                    Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodel:BookViewModel}},Path=AddBookCommand}"
                                    CommandParameter="{Binding .}"
                                    />
                            </VerticalStackLayout>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </ScrollView>
        
        <ScrollView Grid.Column="2">
            <CollectionView ItemsSource="{Binding SavedBooks}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Border Padding="5">
                            <VerticalStackLayout>
                                <Label Text="{Binding .}" FontSize="24" />
                                <Grid ColumnDefinitions="*,*">
                                    <Button Text="Edit"
                                            Grid.Column="0"
                                            Background="Yellow"
                                            Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodel:BookViewModel}},Path=EditBookCommand}"
                                            CommandParameter="{Binding .}"
                                            />
                                    <Button Text="Delete"
                                            Grid.Column="1"
                                            Background="Red"
                                            Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodel:BookViewModel}},Path=DeleteBookCommand}"
                                            CommandParameter="{Binding .}"
                                            />
                                </Grid>
                            </VerticalStackLayout>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </ScrollView>
        
    </Grid>

</ContentPage>
